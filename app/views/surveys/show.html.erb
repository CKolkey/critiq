<div class="container">
  <div class="top-box">
    <h1><%= @survey.title %></h1>
    <p><%= @survey.description %></p>
    <p> // display recipients here when controller is set up</p>
    <!-- status of survey -->
    <% if @survey.published %>
      <p>status: published </p>
    <% else %>
      <p>status: pending</p>
    <% end %>
    <!-- when status pending: link to edit -->
    <%# unless @survey.published == true %>
      <%#= link_to "edit survey", edit_survey_path(@survey)  %>
    <%# end %>

    <% @survey.questions.each do |question|%>
      <p><%= question.name %></p>
      <% question.choices.each do |choice| %>
      <ul>
        <li><em><%= choice.name %></em></li>
      </ul>
      <% end %>
    <% end %>
    <br>
    <br>
    <%= link_to "Back", surveys_path, class:"btn btn-primary"  %>
  </div>
  <div>&nbsp;</div>
  <div class="bottom-box">
    <% if @survey.questions.last.responses.count > ((@survey.questions.first.sent_question_ids.count - 1) * 0.7).round  %>
      <% @survey.questions.each_with_index do |question, index| %>
        <p><%= index + 1 %>. <%= question.name %></p>
        <ul>
          <% question.responses.each do |response| %>
            <% if question.question_type == "text" %>
              <li><%= response.content %></li>
            <% else %>
              <li><%= response.choice.name %></li>
            <% end %>
          <% end %>
        </ul>
      <% end %>
    <% else %>
      <p>Not enough responses yet.</p>
    <% end %>
  </div>
</div>
